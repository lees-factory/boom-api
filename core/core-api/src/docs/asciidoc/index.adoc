= Boom API Documentation
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:
:snippets: build/generated-snippets

== 소개 (Introduce)
Boom API 문서입니다.

== Member API

=== 내 정보 조회 (Get Me)
현재 로그인한 사용자의 프로필 정보를 조회합니다.

==== HTTP Request
include::{snippets}/getMe/http-request.adoc[]

==== Request Headers
include::{snippets}/getMe/request-headers.adoc[]

==== HTTP Response
include::{snippets}/getMe/http-response.adoc[]

==== Response Fields
include::{snippets}/getMe/response-fields.adoc[]

'''

=== 유저 프로필 조회 (Get Member Profile)
특정 유저의 프로필을 조회합니다. +
암장 입장 유저 목록 등에서 프로필 확인 시 사용합니다. +
활동 점수, 등급, 획득한 뱃지 목록을 함께 반환합니다.

==== HTTP Request
include::{snippets}/getMemberProfile/http-request.adoc[]

==== Path Parameters
include::{snippets}/getMemberProfile/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/getMemberProfile/http-response.adoc[]

==== Response Fields
include::{snippets}/getMemberProfile/response-fields.adoc[]

'''

=== 내 정보 수정 (Update Me)
현재 로그인한 사용자의 프로필 정보를 수정합니다. +
`multipart/form-data` 형식으로 전송합니다. +
프로필 이미지는 Supabase Storage에 업로드 후 URL이 저장됩니다.

NOTE: 모든 필드는 선택사항입니다. 전달된 필드만 업데이트됩니다.

==== HTTP Request
include::{snippets}/updateMe/http-request.adoc[]

==== Request Headers
include::{snippets}/updateMe/request-headers.adoc[]

==== HTTP Response
include::{snippets}/updateMe/http-response.adoc[]

==== Response Fields
include::{snippets}/updateMe/response-fields.adoc[]

'''

=== 소셜 로그인 (Social Login)
소셜 계정으로 로그인하거나 회원가입을 진행합니다. +
Apple 로그인의 경우 `name`, `email`, `profileImage`가 전달되지 않을 수 있으며, +
`name`이 null이면 UUID 기반 이름이 자동 생성됩니다.

==== HTTP Request
include::{snippets}/member-login/http-request.adoc[]

==== Request Fields
include::{snippets}/member-login/request-fields.adoc[]

==== HTTP Response
include::{snippets}/member-login/http-response.adoc[]

==== Response Fields
include::{snippets}/member-login/response-fields.adoc[]

'''

=== 토큰 갱신 (Token Refresh)
Refresh Token을 사용하여 새로운 Access Token과 Refresh Token을 발급받습니다. +
자동 로그인 시 사용합니다. (Refresh Token Rotation 적용)

==== HTTP Request
include::{snippets}/member-refresh/http-request.adoc[]

==== Request Fields
include::{snippets}/member-refresh/request-fields.adoc[]

==== HTTP Response
include::{snippets}/member-refresh/http-response.adoc[]

==== Response Fields
include::{snippets}/member-refresh/response-fields.adoc[]

== Crew API

=== 크루 생성 (Create Crew)
크루를 생성합니다.

==== HTTP Request
include::{snippets}/createCrew/http-request.adoc[]

==== Request Headers
include::{snippets}/createCrew/request-headers.adoc[]

==== Request Fields
include::{snippets}/createCrew/request-fields.adoc[]

==== HTTP Response
include::{snippets}/createCrew/http-response.adoc[]

==== Response Fields
include::{snippets}/createCrew/response-fields.adoc[]

'''

=== 크루 가입 (Join Crew)
특정 크루에 가입합니다.

==== HTTP Request
include::{snippets}/joinCrew/http-request.adoc[]

==== Request Headers
include::{snippets}/joinCrew/request-headers.adoc[]

==== Path Parameters
include::{snippets}/joinCrew/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/joinCrew/http-response.adoc[]

==== Response Fields
include::{snippets}/joinCrew/response-fields.adoc[]

'''

=== 내 크루 목록 조회 (Get My Crews)
현재 로그인한 사용자가 가입한 크루 목록을 조회합니다. +
각 크루의 기본 정보와 내 역할, 현재 멤버 수를 함께 반환합니다.

==== HTTP Request
include::{snippets}/getMyCrews/http-request.adoc[]

==== Request Headers
include::{snippets}/getMyCrews/request-headers.adoc[]

==== HTTP Response
include::{snippets}/getMyCrews/http-response.adoc[]

==== Response Fields
include::{snippets}/getMyCrews/response-fields.adoc[]

'''

=== 크루 멤버 목록 조회 (Get Crew Members)
특정 크루의 멤버 목록을 조회합니다. +
LEADER → MEMBER → GUEST 순으로 정렬됩니다.

==== HTTP Request
include::{snippets}/getCrewMembers/http-request.adoc[]

==== Path Parameters
include::{snippets}/getCrewMembers/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/getCrewMembers/http-response.adoc[]

==== Response Fields
include::{snippets}/getCrewMembers/response-fields.adoc[]

'''

=== 크루 일정 등록 (Create Crew Schedule)
크루 일정을 등록합니다. +
LEADER 또는 MEMBER만 등록할 수 있으며, GUEST는 접근이 제한됩니다. +
`gymId`는 선택사항으로, 특정 암장에서의 모임인 경우 지정할 수 있습니다.

==== HTTP Request
include::{snippets}/createCrewSchedule/http-request.adoc[]

==== Request Headers
include::{snippets}/createCrewSchedule/request-headers.adoc[]

==== Path Parameters
include::{snippets}/createCrewSchedule/path-parameters.adoc[]

==== Request Fields
include::{snippets}/createCrewSchedule/request-fields.adoc[]

==== HTTP Response
include::{snippets}/createCrewSchedule/http-response.adoc[]

==== Response Fields
include::{snippets}/createCrewSchedule/response-fields.adoc[]

'''

=== 크루 일정 목록 조회 (Get Crew Schedules)
크루의 일정 목록을 조회합니다. +
크루 멤버만 조회할 수 있으며, 일정은 날짜 오름차순으로 정렬됩니다.

==== HTTP Request
include::{snippets}/getCrewSchedules/http-request.adoc[]

==== Request Headers
include::{snippets}/getCrewSchedules/request-headers.adoc[]

==== Path Parameters
include::{snippets}/getCrewSchedules/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/getCrewSchedules/http-response.adoc[]

==== Response Fields
include::{snippets}/getCrewSchedules/response-fields.adoc[]

'''

=== 크루 일정 참여 (Participate Schedule)
크루 일정에 참여합니다. +
LEADER 또는 MEMBER만 참여할 수 있으며, GUEST는 접근이 제한됩니다. +
참여 시 활동 점수 +10이 반영됩니다.

==== HTTP Request
include::{snippets}/participateSchedule/http-request.adoc[]

==== Request Headers
include::{snippets}/participateSchedule/request-headers.adoc[]

==== Path Parameters
include::{snippets}/participateSchedule/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/participateSchedule/http-response.adoc[]

==== Response Fields
include::{snippets}/participateSchedule/response-fields.adoc[]

'''

=== 크루 일정 참여자 목록 조회 (Get Schedule Participants)
크루 일정의 참여자 목록을 조회합니다. +
크루 멤버만 조회할 수 있습니다.

==== HTTP Request
include::{snippets}/getScheduleParticipants/http-request.adoc[]

==== Request Headers
include::{snippets}/getScheduleParticipants/request-headers.adoc[]

==== Path Parameters
include::{snippets}/getScheduleParticipants/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/getScheduleParticipants/http-response.adoc[]

==== Response Fields
include::{snippets}/getScheduleParticipants/response-fields.adoc[]

'''

=== 동네 크루 찾기 (Get Local Crews)
현재 위치 기준 반경 5km 이내의 크루 목록을 조회합니다. +
활동 점수 높은 순으로 정렬됩니다.

==== HTTP Request
include::{snippets}/getLocalCrews/http-request.adoc[]

==== Query Parameters
include::{snippets}/getLocalCrews/query-parameters.adoc[]

==== HTTP Response
include::{snippets}/getLocalCrews/http-response.adoc[]

==== Response Fields
include::{snippets}/getLocalCrews/response-fields.adoc[]

'''

=== 크루 랭킹 조회 (Get Crew Ranking)
크루원들의 평균 활동 점수 기반 크루 랭킹을 조회합니다. +
평균 활동 점수가 높은 크루 순으로 정렬됩니다.

==== HTTP Request
include::{snippets}/getCrewRanking/http-request.adoc[]

==== Query Parameters
include::{snippets}/getCrewRanking/query-parameters.adoc[]

==== HTTP Response
include::{snippets}/getCrewRanking/http-response.adoc[]

==== Response Fields
include::{snippets}/getCrewRanking/response-fields.adoc[]

== Gym API

=== 암장 리스트 조회 (Get Gyms On Map)
지도 뷰포트(좌표 범위) 내의 암장 리스트를 조회합니다.

==== HTTP Request
include::{snippets}/getGymsOnMap/http-request.adoc[]

==== Request Headers
include::{snippets}/getGymsOnMap/request-headers.adoc[]

==== Query Parameters
include::{snippets}/getGymsOnMap/query-parameters.adoc[]

==== HTTP Response
include::{snippets}/getGymsOnMap/http-response.adoc[]

==== Response Fields
include::{snippets}/getGymsOnMap/response-fields.adoc[]

=== 반경 기반 암장 검색 - 지도용 (Search Gyms By Radius - Map)
특정 위치를 기준으로 반경 N km 이내의 암장을 검색합니다. +
지도에 마커로 표시할 때 사용하며, 전체 결과를 반환합니다. +
(내부적으로 해당 반경을 포함하는 사각형 영역을 계산하여 조회합니다.)

==== HTTP Request
include::{snippets}/getGymsByRadius/http-request.adoc[]

==== Request Headers
include::{snippets}/getGymsByRadius/request-headers.adoc[]

==== Query Parameters
include::{snippets}/getGymsByRadius/query-parameters.adoc[]

==== HTTP Response
include::{snippets}/getGymsByRadius/http-response.adoc[]

==== Response Fields
include::{snippets}/getGymsByRadius/response-fields.adoc[]

'''

=== 반경 기반 암장 목록 - 리스트용 (Search Gyms By Radius - List)
특정 위치를 기준으로 반경 N km 이내의 암장 목록을 조회합니다. +
무한스크롤(Infinite Scroll) 방식의 페이징을 지원합니다.

NOTE: `hasNext`가 `true`이면 다음 페이지가 존재합니다. `page`를 1 증가시켜 다음 데이터를 요청하세요.

==== HTTP Request
include::{snippets}/getGymsByRadiusList/http-request.adoc[]

==== Request Headers
include::{snippets}/getGymsByRadiusList/request-headers.adoc[]

==== Query Parameters
include::{snippets}/getGymsByRadiusList/query-parameters.adoc[]

==== HTTP Response
include::{snippets}/getGymsByRadiusList/http-response.adoc[]

==== Response Fields
include::{snippets}/getGymsByRadiusList/response-fields.adoc[]

'''

=== 현재 입장중인 암장 조회 (Get Current Visit)
현재 로그인한 유저가 입장중인 암장 정보를 조회합니다. +
입장중인 암장이 없으면 `data`가 `null`로 반환됩니다.

==== HTTP Request
include::{snippets}/getCurrentVisit/http-request.adoc[]

==== Request Headers
include::{snippets}/getCurrentVisit/request-headers.adoc[]

==== HTTP Response
include::{snippets}/getCurrentVisit/http-response.adoc[]

==== Response Fields
include::{snippets}/getCurrentVisit/response-fields.adoc[]

'''

=== [TEST ONLY] 암장 입장 - 위치 검증 없음 (Enter Gym For Test)
WARNING: **테스트 전용 API입니다. 운영 환경에서는 사용하지 마세요.** +
위치 검증(100m 반경) 없이 암장에 입장합니다. +
GPS 위치 전송이 불가능한 테스트 환경에서 입장 기능을 검증할 때 사용합니다.

==== HTTP Request
include::{snippets}/enterGymForTest/http-request.adoc[]

==== Request Headers
include::{snippets}/enterGymForTest/request-headers.adoc[]

==== Path Parameters
include::{snippets}/enterGymForTest/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/enterGymForTest/http-response.adoc[]

==== Response Fields
include::{snippets}/enterGymForTest/response-fields.adoc[]

'''

=== 암장 입장 (Enter Gym)
특정 암장에 입장 처리합니다. +
사용자의 현재 위치가 암장에서 **100m 이내**여야 입장이 가능합니다.

NOTE: 클라이언트에서 GPS 위치를 함께 전송해야 합니다. 서버에서 암장과의 거리를 검증합니다.

==== HTTP Request
include::{snippets}/enterGym/http-request.adoc[]

==== Request Headers
include::{snippets}/enterGym/request-headers.adoc[]

==== Path Parameters
include::{snippets}/enterGym/path-parameters.adoc[]

==== Request Fields
include::{snippets}/enterGym/request-fields.adoc[]

==== HTTP Response
include::{snippets}/enterGym/http-response.adoc[]

==== Response Fields
include::{snippets}/enterGym/response-fields.adoc[]

'''

=== 암장 퇴장 (Exit Gym)
특정 암장에서 퇴장 처리합니다.

==== HTTP Request
include::{snippets}/exitGym/http-request.adoc[]

==== Request Headers
include::{snippets}/exitGym/request-headers.adoc[]

==== Path Parameters
include::{snippets}/exitGym/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/exitGym/http-response.adoc[]

==== Response Fields
include::{snippets}/exitGym/response-fields.adoc[]

'''

=== 방문 연장 (Extend Visit)
암장 방문 시간을 연장합니다. +
기본적으로 입장 후 3시간이 지나면 자동 퇴장 처리됩니다. +
만료 10분 전 알림을 받은 사용자가 연장 버튼을 누르면 3시간이 추가됩니다.

==== HTTP Request
include::{snippets}/extendVisit/http-request.adoc[]

==== Request Headers
include::{snippets}/extendVisit/request-headers.adoc[]

==== Path Parameters
include::{snippets}/extendVisit/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/extendVisit/http-response.adoc[]

==== Response Fields
include::{snippets}/extendVisit/response-fields.adoc[]

'''

=== 암장 입장 유저 목록 조회 (Get Gym Visitors)
특정 암장에 현재 입장 중인 유저 목록을 조회합니다. +
퇴장한 유저는 목록에 포함되지 않습니다. +
무한스크롤(Infinite Scroll) 방식의 페이징을 지원합니다.

NOTE: `hasNext`가 `true`이면 다음 페이지가 존재합니다. `page`를 1 증가시켜 다음 데이터를 요청하세요.

==== HTTP Request
include::{snippets}/getGymVisitors/http-request.adoc[]

==== Request Headers
include::{snippets}/getGymVisitors/request-headers.adoc[]

==== Path Parameters
include::{snippets}/getGymVisitors/path-parameters.adoc[]

==== Query Parameters
include::{snippets}/getGymVisitors/query-parameters.adoc[]

==== HTTP Response
include::{snippets}/getGymVisitors/http-response.adoc[]

==== Response Fields
include::{snippets}/getGymVisitors/response-fields.adoc[]

== Badge API

=== 내 뱃지 조회 (Get My Badges)
현재 로그인한 사용자의 뱃지 목록을 조회합니다. +
마이페이지 진입 시 on-demand로 조건을 평가하여 신규 뱃지를 자동 획득합니다. +
`isNew`가 `true`인 뱃지는 이번 조회에서 새로 획득한 뱃지입니다.

==== HTTP Request
include::{snippets}/getMyBadges/http-request.adoc[]

==== Request Headers
include::{snippets}/getMyBadges/request-headers.adoc[]

==== HTTP Response
include::{snippets}/getMyBadges/http-response.adoc[]

==== Response Fields
include::{snippets}/getMyBadges/response-fields.adoc[]

'''

=== 타 유저 뱃지 조회 (Get Member Badges)
특정 유저의 뱃지 목록을 조회합니다. +
저장된 뱃지만 반환하며, 조건 재평가는 하지 않습니다. +
`isNew`는 항상 `false`입니다.

==== HTTP Request
include::{snippets}/getMemberBadges/http-request.adoc[]

==== Path Parameters
include::{snippets}/getMemberBadges/path-parameters.adoc[]

==== HTTP Response
include::{snippets}/getMemberBadges/http-response.adoc[]

==== Response Fields
include::{snippets}/getMemberBadges/response-fields.adoc[]
